@page "/admin/members/update/{ID}"
@inherits Admin
@layout AdminLayout

@if (loggedIn)
{
    <RadzenStack Gap="1.5rem">
        <RadzenTemplateForm TItem="Document" Data=@model Submit=@OnSubmit>
            <RadzenRow >
                <RadzenColumn Size="12">
                    <RadzenFormField Text="Tên thành viên" Variant="Variant.Outlined">
                        <ChildContent>
                            <RadzenTextBox Name="Name" @bind-Value=@model.Name />
                        </ChildContent>
                    </RadzenFormField>
                </RadzenColumn>
            </RadzenRow>
            <RadzenRow Gap="1rem">
                <RadzenColumn Size="6">
                    <RadzenStack>
                        <RadzenFormField Text="Số áo" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenTextBox Name="Number" @bind-Value=@model.Number />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Tốc độ" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Speed" @bind-Value=@model.Speed />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Bứt tốc" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Acceleration" @bind-Value=@model.Acceleration />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Dứt điểm" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Shoot" @bind-Value=@model.Shoot />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Chọn vị trí" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Positioning" @bind-Value=@model.Positioning />
                            </ChildContent>
                        </RadzenFormField>
                    </RadzenStack>
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenStack>
                        <RadzenFormField Text="Vị trí thi đấu" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenTextBox Name="Position" @bind-Value=@model.Position />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Chuyền ngắn" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Short pass" @bind-Value=@model.ShortPass />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Chuyền dài" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="LongPass" @bind-Value=@model.LongPass />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Tầm nhìn" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Vision" @bind-Value=@model.Vision />
                            </ChildContent>
                        </RadzenFormField>
                        <RadzenFormField Text="Băng cắt" Variant="Variant.Outlined">
                            <ChildContent>
                                <RadzenNumeric TValue="int" Name="Crossing" @bind-Value=@model.Crossing />
                            </ChildContent>
                        </RadzenFormField>
                    </RadzenStack>
                </RadzenColumn>
            </RadzenRow>
            <RadzenButton ButtonType="ButtonType.Submit" Text="Submit"></RadzenButton>
        </RadzenTemplateForm>
    </RadzenStack>
}

@code {
    [Parameter]
    public string? ID { get; set; }
    Document model;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        model = DB.Accounts.Find(ID);

        StateHasChanged();
    }

    void OnSubmit(Document doc)
    {
        DB.Accounts.InsertOrUpdate(doc);

        model = doc;

        StateHasChanged();
    }

    protected override Task OnAfterRenderAsync(bool firstRender)
    {
        return base.OnAfterRenderAsync(firstRender);
    }
}
